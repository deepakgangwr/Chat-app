import{c as o,u as F,r,j as e,V as n}from"./index-Ij_dlwAs.js";import{M as V}from"./mail-DjYZc8QE.js";import{S as D,X as H}from"./x-DVjWVDuf.js";/**
 * @license lucide-react v0.459.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=o("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.459.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=o("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.459.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=o("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.459.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=o("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.459.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=o("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.459.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=o("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),G=()=>{var C;const{authUser:s,isUpdatingProfile:l,updateProfile:S}=F(),[b,v]=r.useState(null),[y,j]=r.useState(!1),[i,u]=r.useState(""),[m,x]=r.useState(!1),[N,w]=r.useState(!1),c=r.useRef(null),E=(a,t=800,d=.8)=>new Promise(I=>{const p=document.createElement("canvas"),A=p.getContext("2d"),g=new Image;g.onload=()=>{let{width:h,height:f}=g;h>t&&(f=f*t/h,h=t),p.width=h,p.height=f,A.drawImage(g,0,0,h,f);const R=p.toDataURL("image/jpeg",d);I(R)},g.src=URL.createObjectURL(a)}),z=async a=>{const t=a.target.files[0];if(t){if(!t.type.startsWith("image/")){n.error("Please select an image file");return}if(t.size>5*1024*1024){n.error("Image size should be less than 500kB");return}try{w(!0),n.loading("Processing image...");const d=await E(t,800,.8);if(Math.ceil(d.length*3/4)>2*1024*1024){n.error("Image too large even after compression.");return}v(d),x(!0),n.dismiss(),n.success("Image ready!")}catch(d){console.error("Error processing image:",d),n.error("Failed to process image.")}finally{w(!1)}}},M=async()=>{try{const a={};b&&(a.profilePic=b),i.trim()&&i!==(s==null?void 0:s.fullName)&&(a.fullName=i.trim()),Object.keys(a).length>0&&(await S(a),v(null),x(!1),j(!1),u(""),c.current&&(c.current.value=""))}catch(a){console.error("Error updating profile:",a)}},k=()=>{m&&!window.confirm("Discard unsaved changes?")||(v(null),u(""),j(!1),x(!1),c.current&&(c.current.value=""))},L=()=>{var a;(a=c.current)==null||a.click()};return r.useEffect(()=>{const a=t=>{t.key==="Escape"&&m&&k()};return m&&document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[m]),e.jsxs("div",{className:"relative h-screen pt-20 bg-gradient-to-b from-white via-sky-50 to-slate-50 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-pink-200 rounded-full blur-3xl opacity-40 -z-10"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-sky-200 rounded-full blur-3xl opacity-40 -z-10"}),e.jsx("div",{className:"absolute top-1/2 -left-20 w-64 h-64 bg-purple-200 rounded-full blur-3xl opacity-30 -z-10"}),e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-start",children:[e.jsxs("div",{className:"col-span-1 rounded-3xl bg-gradient-to-br from-sky-100 via-sky-200 to-blue-100 text-slate-800 shadow-md p-6 text-center relative z-10",children:[e.jsxs("div",{className:"relative mx-auto w-32 h-32",children:[e.jsx("img",{src:b||(s==null?void 0:s.profilePic)||"/avatar.png",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"}),e.jsx("button",{onClick:L,className:`absolute -bottom-2 -right-2 bg-white p-3 rounded-full shadow cursor-pointer transition hover:scale-105 ${l||N?"animate-pulse opacity-70":""}`,disabled:l||N,title:"Change Profile Photo",children:N?e.jsx("div",{className:"w-5 h-5 border-2 border-sky-600 border-t-transparent rounded-full animate-spin"}):e.jsx(q,{className:"w-5 h-5 text-sky-600"})}),e.jsx("input",{ref:c,type:"file",className:"hidden",accept:"image/*",onChange:z,disabled:l})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xl font-semibold",children:s==null?void 0:s.fullName}),e.jsxs("div",{className:"mt-1 inline-flex items-center gap-2 text-slate-600",children:[e.jsx(V,{className:"w-4 h-4"})," ",s==null?void 0:s.email]}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(D,{className:"w-4 h-4"})," Active Account"]})]}),m&&e.jsxs("div",{className:"mt-4 flex gap-2 justify-center",children:[e.jsx("button",{onClick:M,disabled:l,className:"px-4 py-2 rounded-xl bg-sky-500 text-white flex items-center gap-2 hover:bg-sky-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4"}),"Save Changes"]})}),e.jsxs("button",{onClick:k,disabled:l,className:"px-4 py-2 rounded-xl bg-slate-200 text-slate-700 flex items-center gap-2 hover:bg-slate-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"Cancel changes (Esc)",children:[e.jsx(H,{className:"w-4 h-4"}),"Cancel"]})]})]}),e.jsxs("div",{className:"col-span-2 space-y-6 relative z-10",children:[e.jsxs("div",{className:"rounded-3xl bg-white border border-slate-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-tr from-sky-200 to-sky-100 flex items-center justify-center text-sky-700",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Personal Information"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Full Name"}),e.jsx("input",{className:"w-full h-11 rounded-xl bg-slate-50 border border-slate-200 px-4",value:s==null?void 0:s.fullName,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Email"}),e.jsx("input",{className:"w-full h-11 rounded-xl bg-slate-50 border border-slate-200 px-4",value:s==null?void 0:s.email,readOnly:!0})]})]})]}),e.jsxs("div",{className:"rounded-3xl bg-white border border-slate-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-tr from-green-100 to-emerald-50 flex items-center justify-center text-green-600",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Account Information"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-slate-600",children:"Member Since"}),e.jsx("span",{className:"text-slate-900",children:((C=s==null?void 0:s.createdAt)==null?void 0:C.split("T")[0])||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-slate-600",children:"Account Status"}),e.jsxs("span",{className:"inline-flex items-center gap-2 text-green-600",children:[e.jsx("span",{className:"size-2 rounded-full bg-green-500"}),"Active"]})]})]})]}),e.jsxs("div",{className:"rounded-3xl bg-gradient-to-br from-amber-50 to-amber-100 border border-amber-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(K,{className:"w-5 h-5 text-amber-500"}),e.jsx("h3",{className:"text-sm font-semibold text-amber-900",children:"Edit Name"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 px-4 py-2.5 rounded-xl bg-white border border-slate-200 outline-none",placeholder:(s==null?void 0:s.fullName)||"Your name",value:i,onChange:a=>{u(a.target.value),x(!0)},disabled:!y||l}),y?e.jsxs("button",{className:"px-4 py-2 rounded-xl bg-amber-500 text-white flex items-center gap-2 hover:bg-amber-600",disabled:l||i.trim().length===0,onClick:()=>{i.trim()&&x(!0)},children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Ready"})]}):e.jsxs("button",{className:"px-4 py-2 rounded-xl bg-slate-200 text-slate-700 flex items-center gap-2 hover:bg-slate-300",onClick:()=>{u((s==null?void 0:s.fullName)||""),j(!0)},children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})]})]})]})]})})]})};export{G as default};
